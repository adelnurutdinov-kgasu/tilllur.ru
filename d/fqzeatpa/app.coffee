
# Data

data2 = [
	"https://bro-bg-store.s3.yandex.net/95696fd9-5829-4c9d-baf4-6132169f54da.jpg",
# 	"https://bro-bg-store.s3.yandex.net/18b0b0a9-8633-40af-8c77-c0fffb871d16.jpg",
	"https://bro-bg-store.s3.yandex.net/75c8f6ef-908f-4ae6-bbcd-4e598bf37127.jpg",
	"https://bro-bg-store.s3.yandex.net/a7aab78d-85f8-4fcf-b757-3fadbc73c03a.jpg",
	"https://bro-bg-store.s3.yandex.net/63b9794e-d3e2-42bb-b15c-3c6b99048328.jpg",
	"https://bro-bg-store.s3.yandex.net/32f94868-9fd1-43e9-964e-6104dd1a9e6a.jpg",
	"https://bro-bg-store.s3.yandex.net/ffd1055a-cc35-4f15-8e4e-47a12a6065e8.jpg",
	"https://bro-bg-store.s3.yandex.net/90954bd7-b328-4594-9dda-897a9f0789fd.jpg",
# 	"http://bro-bg-store.s3.yandex.net/9a7c3bd8-181c-4ad2-a1a9-80763bacaf58.jpg",
# 	"http://bro-bg-store.s3.yandex.net/65658f31-6153-4323-94d6-e4093c69424d.jpg",
	"https://bro-bg-store.s3.yandex.net/50a81652-4855-403e-ae64-21b82d67df09.jpg",
# 	"http://bro-bg-store.s3.yandex.net/1707a1e7-864d-4f8c-acaf-bb506eca1ca5.jpg",
	"https://bro-bg-store.s3.yandex.net/5f1921a6-7035-44b7-a91f-ca39201ea2fd.jpg",
	"https://bro-bg-store.s3.yandex.net/74b2daaf-9308-4d51-8001-4c26a1b6ef3d.jpg",
	"https://bro-bg-store.s3.yandex.net/e352e2c5-5522-4b33-89d8-0ded9ee1c2e4.jpg",
	"https://bro-bg-store.s3.yandex.net/98c0cf5b-e75c-4407-840d-6f74136a7367.jpg",
# 	"http://bro-bg-store.s3.yandex.net/b9de5cb6-538e-44f6-8130-f71bd4ac3f5d.jpg",
	"https://bro-bg-store.s3.yandex.net/73f2df80-2554-4876-bc5d-fe223cd7d0b9.jpg",
	"https://bro-bg-store.s3.yandex.net/002ccbe3-1b5e-498a-abaf-6818c7b9c211.jpg",
	"https://bro-bg-store.s3.yandex.net/b1ff1e77-4b03-4d1a-9064-67b9aa1d9c46.jpg",
# 	"https://bro-bg-store.s3.yandex.net/15a9e2f9-b099-4699-872a-8e1a6be9af2d.jpg",
	"https://bro-bg-store.s3.yandex.net/e962e0b4-708e-44e9-b191-330afe6eb6d7.png",
	"https://bro-bg-store.s3.yandex.net/5ae274d2-e510-481f-b6c9-f4fddcd94b66.jpg",
	"https://bro-bg-store.s3.yandex.net/352691ad-8db8-4441-9657-7f9dbc6a66f9.jpg",
	"https://bro-bg-store.s3.yandex.net/a38f97cf-f291-4b4c-b088-5dcab62f6dfc.jpg",
	"https://bro-bg-store.s3.yandex.net/ed438b0e-0080-490e-8465-44944043d327.jpg",
	"http://bro-bg-store.s3.yandex.net/526d4312-7c14-441a-b4cf-64d07e59e900.png",
	"https://bro-bg-store.s3.yandex.net/70f9a0ed-ad6e-486a-8e33-21a1ae6f4e1d.jpg",
	"https://bro-bg-store.s3.yandex.net/53d53039-6a89-4784-8f9a-645492e16d86.jpg",
	"https://bro-bg-store.s3.yandex.net/f26cbe0b-6ea3-4312-9d2a-7addf961546e.jpg",
	"https://bro-bg-store.s3.yandex.net/f3293729-5d83-4f70-8cf8-9425360f8ae7.jpg",
	"https://bro-bg-store.s3.yandex.net/b052e18e-a31a-4775-a532-5e6d5d7df314.jpg",
	"https://bro-bg-store.s3.yandex.net/c07693bd-ed4d-4f55-b0ef-8ab57d50009b.jpg",
	"https://bro-bg-store.s3.yandex.net/ffaa9970-6575-4c73-beda-8f91dac2a043.jpg",
	"https://bro-bg-store.s3.yandex.net/b933d476-8fee-40c8-ae42-d3153107f19f.jpg",
# 	"http://bro-bg-store.s3.yandex.net/40773753-d489-4295-98c7-eebe7f57d04e.jpg",
	"https://bro-bg-store.s3.yandex.net/b84e2ede-3535-49fe-971d-ec819a207dc8.png",
	"https://bro-bg-store.s3.yandex.net/b119177e-1b9e-4894-9445-3a52bc4ef91c.jpg",
	"https://bro-bg-store.s3.yandex.net/0565bd00-aebd-466a-a842-f7286789997f.jpg",
	"https://bro-bg-store.s3.yandex.net/824146e9-3653-419b-acb7-5f50e6bffbc9.jpg",
	"https://bro-bg-store.s3.yandex.net/c07bbd35-282f-4df2-a41a-acb71e8f6b82.jpg",
	"https://bro-bg-store.s3.yandex.net/90919409-0c17-4497-9b4b-f9da23a8d1ba.png",
	"https://bro-bg-store.s3.yandex.net/499bd476-52b7-4a31-a7ad-cd37860d270f.jpg",
	"https://bro-bg-store.s3.yandex.net/bc43508c-f34d-4c71-adf7-48f6bca261a8.jpg",
# 	"http://bro-bg-store.s3.yandex.net/6c3c23b5-6e68-4f36-b983-7dba0e11aa3a.jpg",
# 	"http://bro-bg-store.s3.yandex.net/c333ff3b-d726-4e29-bb52-d524fc7d31c4.jpg",
	"https://bro-bg-store.s3.yandex.net/e26452eb-6e82-4f58-8468-ce6a86c952f1.jpg",
	"https://bro-bg-store.s3.yandex.net/6c3e5290-ddcc-46f4-9519-16338c3e0734.jpg",
	"https://bro-bg-store.s3.yandex.net/79f071c4-2b74-4fe0-8e8b-6690039fac1f.jpg",
	"https://bro-bg-store.s3.yandex.net/a07dfd40-270a-45be-9aa8-f6440eee1902.png",
]

data3 = [
	"https://bro-bg-store.s3.yandex.net/c8e8510e-1fe1-47b5-b75e-860e68a99710.png",
	"https://bro-bg-store.s3.yandex.net/aba5917a-d9af-4474-8162-3ed3368c53a3.png",
	"https://bro-bg-store.s3.yandex.net/0a5add42-8a11-474d-8c4a-8a70623ae8c8.jpg",
	"https://bro-bg-store.s3.yandex.net/cb6fefa0-1cae-4ce5-a11c-abc51802b922.jpg",
	"https://bro-bg-store.s3.yandex.net/ecd01c21-3918-475f-8d00-5e917275ba7e.jpg",
	"https://bro-bg-store.s3.yandex.net/c3cd1492-8f0a-41df-adb7-139e984722ce.jpg",
	"https://bro-bg-store.s3.yandex.net/f6fb3dd1-5394-41f3-a015-b9de97bd5a09.jpg",
	"https://bro-bg-store.s3.yandex.net/306c2c52-9895-4ebc-887e-77b50fb98f12.jpg",
	"https://bro-bg-store.s3.yandex.net/ce698fc0-cabc-4934-ab77-091d2e681775.jpg",
	"https://bro-bg-store.s3.yandex.net/1bebc9bd-0e02-489e-830c-0acdcd6d9f56.jpg",
	"https://bro-bg-store.s3.yandex.net/53c32548-64ab-49ff-979b-79beb371d0b8.jpg",
	"https://bro-bg-store.s3.yandex.net/a87120b9-bb6d-4040-a94d-153c98b1675e.jpg",
	"https://bro-bg-store.s3.yandex.net/d1ad80b7-256f-400a-ae85-a0ce041ef960.jpg",
	"https://bro-bg-store.s3.yandex.net/a6ab8830-f3c3-4dbb-a367-a51f19a25b28.jpg",
	"https://bro-bg-store.s3.yandex.net/cda7dcd3-e46e-48ae-8963-dc97a5919e36.jpg",
	"https://bro-bg-store.s3.yandex.net/361f5ef1-9569-4990-a49f-2a3bb384c6e2.jpg",
	"https://bro-bg-store.s3.yandex.net/e8d75a28-47c5-4a5c-9527-298726447e22.jpg",
	"https://bro-bg-store.s3.yandex.net/9ec9a424-0484-4255-a921-d99f8fa6adfb.jpg",
]

{ Preview } = require "PreviewComponent"

screen = new Layer { width: 375, height: 812 }
preview = new Preview { view: screen, topTheme: "light", bottomTheme: "light" }


bg = new PageComponent
	parent: screen
	size: screen.size
	scrollVertical: false
	scrollHorizontal: false

if Utils.isMobile()
	pages = ["images/colored_mobile.png", "images/full_mobile.png"]
else
	pages = ["images/colored.png", "images/full.png"]

for imageURL, i in pages
	imageLayer = new Layer
		parent: bg.content
		size: bg.size
		x: bg.width * i
		image: imageURL

# Switch

blurSwitch = new Layer
	parent: bg
	width: 51
	height: 30
	x: 292
	y: 637
	borderRadius: 30
	backgroundColor: "rgba(255,255,255,0.5)"

round = new Layer
	parent: blurSwitch
	size: 24
	backgroundColor: "white"
	borderRadius: "100%"
	x: 3
	y: 3
	

blurSwitch.style =
  "-webkit-backdrop-filter": "blur(10px)"

# Index

currentIndex = -1
currentData = data2

nextIndex = (data = currentData) ->
	currentIndex++
	if currentIndex >= data.length then currentIndex = data.length - 1
	return data[currentIndex]

prevIndex = (data = currentData) ->
	currentIndex--
	if currentIndex < 0 then currentIndex = 0
	return data[currentIndex]

Events.wrap(window).addEventListener "keydown", (event) ->
	if event.keyCode is 39
		screen.image = nextIndex()
	else if event.keyCode is 37
		screen.image = prevIndex()

screen.image = nextIndex()


rightBox = new Layer
	parent: screen
	width: screen.width / 2
	height: screen.height
	x: Align.right
	backgroundColor: "null"


leftBox = new Layer
	parent: screen
	width: screen.width / 2
	height: screen.height
	backgroundColor: "null"

topBarFix = new Layer
	parent: screen, width: screen.width, height: 44
	backgroundColor: "black"

bottomBarFix = new Layer
	parent: screen, width: screen.width, height: 34, y: Align.bottom
	backgroundColor: "black"







nextHadler = () ->
	screen.image = nextIndex()

prevHadler = () ->
	screen.image = prevIndex()

printHadler = () ->
	text = new TextLayer
		parent: screen
		width: screen.width
		fontSize: 16
		color: "black"
		backgroundColor: "rgba(255,255,255,0.5)"
		padding: 40
		text: screen.image
		
	text.center()
	text.style =
		"-webkit-backdrop-filter": "blur(10px)"
	
	text.onTap ->
		@destroy()

cycler = Utils.cycle(bg.content.children)
changeHadler = () ->
	bg.snapToPage(cycler())


themeHandler = () ->
	currentIndex = -1
	if currentData == data2 then currentData = data3
	else currentData = data2
	
	screen.image = nextIndex()





preview.addSection("Choose Background", [
	{ title: "←", handler: prevHadler },
	{ title: "→", handler: nextHadler },
])


preview.addSection("Theme", [
	{ title: "Toggle Dark/Light", handler: themeHandler },
])

preview.addSection("Other", [
	{ title: "Print Photo URL", handler: printHadler },
])
